# 用户需求说明书 (User Requirements Specification)

## 1. 引言
### 1.1 目的
本文档描述了“世界遗产数据系统 (World Heritage Data System)”的用户需求。旨在明确系统的业务目标、用户角色以及各角色的核心使用场景（用户故事），为后续的软件需求分析和系统设计提供基础。

### 1.2 背景
世界遗产数据的分散性使得研究者和爱好者难以获取整合信息。本项目旨在构建一个集数据采集、展示和智能分析为一体的平台，自动化收集 UNESCO 及相关网站的遗产数据，提供可视化的查询界面，并利用 AI 技术辅助用户进行深入分析。

### 1.3 范围
系统包含三个核心子系统：
- **heritage_pipeline**: 负责从互联网采集非结构化和结构化数据。
- **heritage_display**: 负责数据的可视化展示和检索。
- **heritage_insights**: 负责基于 RAG (检索增强生成) 的数据分析和问答。

## 2. 用户角色 (User Roles)

| 角色 | 描述 | 典型用户 |
| :--- | :--- | :--- |
| **系统管理员 (Admin)** | 负责系统的后台维护、爬虫任务调度、数据质量监控。 | 运维工程师、数据工程师 |
| **普通用户 (User)** | 浏览世界遗产数据，使用搜索和 AI 分析功能。 | 遗产研究员、旅游爱好者、学生 |

## 3. 业务需求 (Business Requirements)

### 3.1 数据自动化采集
系统应能定期自动从指定源（如 UNESCO 官网）抓取世界遗产的文本（包括中英文描述）、地理位置等信息，减少人工录入成本。不再保存图片和视频链接。

### 3.2 高效列表展示
系统应提供直观的 Web 界面，以列表模式查看遗产，并提供多维度的筛选（如国家、类型、年份）。

### 3.3 智能数据分析
系统应利用大模型 (LLM) 能力，允许用户用自然语言提问（例如：“哪些遗产受到气候变化威胁？”），并基于库内数据生成准确的回答。

## 4. 用户故事 (User Stories)

### 4.1 数据采集 (Pipeline)
- **US-001**: 作为**管理员**，我希望能够配置爬虫的运行周期（如每周一次），以便数据保持常新。
- **US-002**: 作为**管理员**，我希望在爬虫失败时收到通知或查看日志，以便及时修复数据源变更导致的问题。
- **US-003**: 作为**系统**，应能够自动清洗采集到的数据（如去除 HTML 标签、格式化日期），确保入库数据质量。

### 4.2 数据展示 (Display)
- **US-004**: 作为**用户**，我希望通过筛选条件（如国家、类型、入选年份）查询遗产，以便精确查找符合特定标准的条目。
- **US-005**: 作为**用户**，我希望能在详情页看到遗产的详细描述（包含中文和英文），以便进行深入了解。

### 4.3 智能分析 (Insights)
- **US-007**: 作为**用户**，我希望能向 AI 助手提问关于遗产的复杂问题（如比较不同国家的遗产风格），获得基于事实的总结回答。
- **US-008**: 作为**用户**，我希望 AI 的回答能列出参考的数据来源（引用具体遗产条目），以便我验证信息的准确性。
- **US-009**: 作为**管理员**，我希望系统能定期更新向量数据库索引，以确保 AI 分析涵盖最新的采集数据。

## 5. 验收标准
- 所有爬虫任务在预定时间内成功运行且无严重错误。
- Web 界面响应时间在正常网络环境下小于 2 秒。
- AI 回答的准确性在测试集中达到 80% 以上的可信度。
